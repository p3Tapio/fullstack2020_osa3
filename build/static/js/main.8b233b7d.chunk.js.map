{"version":3,"sources":["PersonForm.js","Persons.js","Filter.js","services/httprequests.js","Message.js","index.js"],"names":["PersonForm","handleChangeInput","handleSubmit","newName","newNumber","onSubmit","id","value","onChange","type","Persons","persons","handleDelete","map","item","key","name","number","onClick","Filter","handleSearchInput","search","url","newPerson","axios","post","then","res","data","get","put","delete","errorStyle","width","border","backgroundColor","marginBottom","padding","successStyle","Message","style","message","success","App","useState","setNewName","setNewNumber","searchResult","setSearchResult","setPersons","msg","setMsg","setSuccess","useEffect","request","x","createMessage","mess","setTimeout","margin","ev","target","term","reg","RegExp","find","filter","test","preventDefault","check","window","confirm","update","person","p","concat","catch","err","console","log","response","errMsg","status","error","length","toDel","href","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8b233b7d.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst PersonForm = ({ handleChangeInput, handleSubmit, newName, newNumber }) => {\r\n\r\n\r\n    return (\r\n        <div>\r\n            <form onSubmit={handleSubmit}>\r\n                <div>\r\n                    name: <input id=\"name\" value={newName} onChange={handleChangeInput} />\r\n                </div>\r\n                <div>\r\n                    number: <input id=\"number\" value={newNumber} onChange={handleChangeInput} />\r\n                </div>\r\n                <div>\r\n                    <br />\r\n                    <button type=\"submit\">add</button>\r\n                </div>\r\n            </form>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst Persons = ({ persons, handleDelete }) => {\r\n    return (\r\n        <div>\r\n            {persons.map(item =>\r\n                <p key={item.id}>{item.name} {item.number} <button id={item.id} onClick={handleDelete}>Delete</button></p>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\nexport default Persons ","import React from 'react'\r\n\r\nconst Filter = ({ handleSearchInput, search }) => {\r\n    return (\r\n        <div>\r\n            <form onSubmit={handleSearchInput}>\r\n                <div>\r\n                    filter shown with: <input id=\"name\" onChange={handleSearchInput} />\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Filter","import axios from 'axios'\r\nconst url = '/api/persons'\r\n\r\nconst create = newPerson => axios.post(url, newPerson).then(res => res.data)\r\nconst read = () => axios.get(url).then(res => res.data)\r\nconst update = (id, newPerson) => axios.put(`${url}/${id}`, newPerson)\r\nconst del = id => axios.delete(`${url}/${id}`)\r\n\r\nexport default { create, read, update, del }","import React from 'react'\r\n\r\nconst Message = ({ message, success }) => {\r\n    \r\n    if (message === null) {\r\n        return null\r\n    } else {\r\n        let style\r\n        if (success) style = successStyle\r\n        else style = errorStyle\r\n\r\n        return (\r\n            <div style={style}>\r\n                {message}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst errorStyle = {\r\n    width: '50vw',\r\n    border: 'solid 1px #A52A2A',\r\n    backgroundColor: '#FFC0CB',\r\n    marginBottom: '10px',\r\n    padding: '10px'\r\n}\r\nconst successStyle = {\r\n    width: '50vw',\r\n    border: 'solid 1px #006400',\r\n    backgroundColor: '#98FB98',\r\n    marginBottom: '10px',\r\n    padding: '10px'\r\n}\r\n\r\nexport default Message","import React, { useState, useEffect } from 'react';\r\nimport ReactDOM from 'react-dom'\r\nimport PersonForm from './PersonForm';\r\nimport Persons from './Persons';\r\nimport Filter from './Filter';\r\nimport request from './services/httprequests'\r\nimport Message from './Message';\r\nimport { decode } from 'punycode';\r\n\r\nconst App = () => {\r\n    const [newName, setNewName] = useState('')\r\n    const [newNumber, setNewNumber] = useState('')\r\n    const [searchResult, setSearchResult] = useState([])\r\n    const [persons, setPersons] = useState([])\r\n    const [msg, setMsg] = useState(null)\r\n    const [success, setSuccess] = useState(null)\r\n\r\n    useEffect(() => {\r\n        request.read().then(x => {\r\n            setPersons(x)\r\n        })\r\n    }, [])\r\n\r\n    const handleChangeInput = ev => {\r\n        if (ev.target.id === 'name') setNewName(ev.target.value)\r\n        if (ev.target.id === 'number') setNewNumber(ev.target.value)\r\n    }\r\n    const handleSubmit = ev => {\r\n\r\n        ev.preventDefault()\r\n        const check = persons.find(x => x.name === newName)\r\n\r\n        if (typeof check !== 'undefined') {\r\n            if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\r\n                const update = { ...check, number: newNumber }\r\n                request.update(update.id, update).then(res => {\r\n                    setPersons(persons.map(person => person.id === update.id ? update : person))\r\n                    createMessage(`${update.name} updated!`)\r\n                    setSuccess(true)\r\n                })\r\n            }\r\n        } else {\r\n            const newPerson = {\r\n                name: newName,\r\n                number: newNumber\r\n            }\r\n            request.create(newPerson).then(p => {\r\n                setPersons(persons.concat(p))\r\n                createMessage(`Added ${newName}`)\r\n                setSuccess(true)\r\n            }).catch(err => {\r\n                console.log('err', err.response)\r\n                let errMsg = err.response.data\r\n                console.log('errMsg.body', errMsg)\r\n                // errMsg = err.response.status === 500 ? errMsg.substring(errMsg.indexOf(\"<pre>\")+5, errMsg.indexOf(\"<br>\")) : errMsg.error\r\n                errMsg = err.response.status === 500 ? errMsg : errMsg.error\r\n                setMsg(errMsg)\r\n                setSuccess(false)\r\n            })\r\n        }\r\n        setNewName('')\r\n        setNewNumber('')\r\n    }\r\n    const handleDelete = (ev) => {\r\n        console.log('ev.target.id', ev.target.id)\r\n        const id = ev.target.id\r\n        const toDel = persons.find(x => x.id === id)\r\n        console.log('toDel', toDel)\r\n        console.log('persons', persons)\r\n        if (window.confirm(`Delete ${toDel.name}?`)) {\r\n            request.del(id)\r\n                .then(() => {\r\n                    setPersons(persons.filter(x => x.id !== toDel.id))\r\n                    createMessage(`${toDel.name} deleted`)\r\n                    setSuccess(true)\r\n                })\r\n                .catch(() => {\r\n                    createMessage(`Info for ${toDel.name} has already been removed from server`)\r\n                    setSuccess(false)\r\n\r\n                })\r\n        }\r\n    }\r\n    const handleSearchInput = ev => {\r\n\r\n        if (ev.target.value !== '') {\r\n            const term = \"^\" + ev.target.value\r\n            const reg = new RegExp(term, 'i')\r\n            const find = persons.filter(x => reg.test(x.name))\r\n            setSearchResult(find)\r\n        }\r\n        else setSearchResult([])\r\n    }\r\n\r\n    const createMessage = (mess) => {\r\n        setMsg(mess)\r\n        setTimeout(() => {\r\n            setMsg(null)\r\n            setSuccess(null)\r\n        }, 2000)\r\n    }\r\n\r\n    return (\r\n        <div style={{ margin: \"50px\" }}>\r\n            <h2>Phonebook</h2>\r\n            <Message message={msg} success={success} />\r\n            <Filter handleSearchInput={handleSearchInput} />\r\n            <h3>Add a new</h3>\r\n            <PersonForm\r\n                handleChangeInput={handleChangeInput}\r\n                handleSubmit={handleSubmit}\r\n                newName={newName}\r\n                newNumber={newNumber}\r\n            />\r\n            {searchResult.length === 0 ? <h3>All Numbers</h3> : <h3>Search results</h3>}\r\n            <Persons persons={searchResult.length === 0 ? persons : searchResult} handleDelete={handleDelete} />\r\n            <a href=\"/info/\">info!</a>\r\n        </div>\r\n    )\r\n}\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}